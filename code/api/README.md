# Taskit Rest API Routes

## UserProfile Routes
Route | Action | Body
---|---|---
`POST /login` | Authenticate user | Body should contain the email and hashed password
`POST /user` | Creates new user | New user profile data
`GET /user/:userID` | Gets specified user by id | none
`PATCH /user/:userID` | Updates specified user | Fields and updated info
`DELETE /user/:userID` | Removes specifid user | none

Data is returned as plain JSON.
```
{
  "email":"mario@plumber.com",
  "name":"Mario Pipes",
  "profilePicture":null,
  "phone":null,
  "bio":null
}
```

## Task Routes
Route | Action | Body | Query String Parameters
---|---|---|---
`POST /task` | Creates new task | New task data |
`GET /task` | Gets a listing of all tasks | none | `status`, `type`
`GET /task/:taskID` | Gets task by id | none |

Data is returned as plain JSON, with each task (if multiple returned) being its own row.
```
Example response
GET /task?type=1
[
  {
    "id":1,
    "title":"Task1",
    "typeID":1,
    "type":"Yard Work",
    "statusID":2,
    "status":"Accepted",
    "description":"description",
    "offeredPrice":1.0,
    "negotiable":0,
    "taskerID":1,
    "tasker":"Tasker Name",
    "workerID":2,
    "worker":"Worker Name",
    "datePosted":"2021-02-08T07:00:00.000Z",
    "dateCompleted":null,
    "rating":null
  },
  {
    "id":2,
    "title":"varchar",
    "typeID":1,
    "type":"Yard Work",
    "statusID":1,
    "status":"Pending",
    "description":"longtext",
    "offeredPrice":0.0,
    "negotiable":0,
    "taskerID":1,
    "tasker":"Tasker Name",
    "workerID":null,
    "worker":null,
    "datePosted":"2021-02-08T07:00:00.000Z",
    "dateCompleted":null,
    "rating":null
  }
]

ex.
PATCH user/1
json.body = {
	"bio":"This is user 1's new bio."
}
```

Important notes: 
- `taskerID` will be set at creation, and is a non-nullable field. `workerID` on the other hand will not be set until a worker has accepted the task and may then be null.
- When creating/updating a task, you must only include fields which are being edited. Do not include tasker/worker names or human readable status/types, only use the IDs. Do not send null fields, simply omit these from the json body. 
- Do not send a primary key. On create these will be generated by the database, on update these will be sent as query parameters.
- Query strings are optional and can be combined with an ampersand.


See [data/README.md](https://github.com/CSCI-3308-CU-Boulder/3308SP21_011_6/blob/main/data/README.md) for additional information about required fields and data types in the database.